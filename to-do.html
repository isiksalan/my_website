<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>to-do with dates</title>
    <link rel="icon" href="images/logo.gif" type="image/gif">
    <style>
    
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    * {
        cursor: url('etc/10553a.gif'), auto;
        font-family: 'Press Start 2P', cursive;
        box-sizing: border-box;
    }

    *:active {
        cursor: url('etc/1869a.gif'), auto !important;
    }

    body {
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: #8511a1; /* Fallback color */
        background-image: url("backgrounds/back-786.gif");
        background-repeat: repeat;
        background-size: auto;
        background-position: center;
    }

    /* New container for the tasks layout */
    .tasks-container {
        display: flex;
        justify-content: center;
        width: 100%;
        max-width: 1000px;
        position: relative;
        margin-top: 130px; /* Increased to accommodate date selector */
        background-image: url("backgrounds/back-786.gif");
        background-repeat: repeat;
        background-size: auto;
        background-position: center;
        padding-top: 40px;
        padding-bottom: 40px;
        border-width: 3px;
        border-color: #5aff5a;
        border-style: dashed;
    }

    .notebook-container {
        width: 70%;
        max-width: 600px;
        background-color: rgba(255, 255, 255, 0.9);
        background-image: url("backgrounds/back-765.gif");
        background-repeat: repeat;
        background-size: auto;
        background-position: center;

        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
        max-height: 80vh;
        overflow-y: auto;
        margin-right: 20px;
        border-width: 3px;
        border-color: #5aff5a;
        border-style: dashed;
    }

    /* Achieved tasks container now on the right */
    .achieved-container {
        width: 30%;
        max-width: 400px;
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
        max-height: 70vh; /* Smaller height than the to-do list */
        overflow-y: auto;
        position: relative;
        top: 0px; /* No offset */
        background-image: url("backgrounds/back-345.gif");
        background-repeat: repeat;
        background-size: auto;
        border-width: 3px;
        border-color: #5aff5a;
        border-style: dashed;
    }

    .todo-header {
        text-align: center;
        margin-bottom: 20px;
        color: #333;
    }

    .todo-input-container {
        display: flex;
        margin-bottom: 20px;
    }

    /* Input field styling */
    #todo-input {
        flex: 1;
        padding: 10px;
        border: 2px inset #ccc;
        border-radius: 5px 0 0 5px;
        font-size: 12px;
        font-family: 'Press Start 2P', cursive;
        background-color: #fff;
        color: #000;
        box-shadow: inset 2px 2px 3px rgba(0,0,0,0.2);
    }
    
    #todo-input:focus {
        background-color: #f0f8ff;
        border-color: #4169e1;
        outline: none;
    }

    #add-button {
        background: linear-gradient(to bottom, #7cfc00, #32cd32);
        color: #000;
        font-weight: bold;
        border: 3px solid;
        border-color: #fff #666 #666 #fff;
        border-radius: 8px;
        padding: 10px 15px;
        cursor: pointer;
        font-size: 0.7rem;
        font-family: 'Press Start 2P', cursive;
        text-shadow: 1px 1px 0px rgba(255,255,255,0.4);
        box-shadow: 2px 2px 4px rgba(0,0,0,0.4);
    }

    #add-button:hover {
        background: linear-gradient(to bottom, #90ee90, #3cb371);
        box-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    }
    
    #add-button:active {
        border-color: #666 #fff #fff #666;
        background: linear-gradient(to bottom, #32cd32, #228b22);
        transform: translateY(2px);
    }

    .todo-list {
        list-style-type: none;
        padding: 0;
    }

    .todo-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        margin-bottom: 10px;
        background-color: #f9f9f9;
        border-radius: 5px;
        border-left: 4px solid #4caf50;
    }

    .todo-text {
        flex: 1;
        font-size: 0.8rem;
    }

    .button-container {
        display: flex;
        gap: 5px;
    }

    .done-button {
        background: linear-gradient(to bottom, #bd4cff, #8c00ff);
        color: white;
        font-weight: bold;
        border: 3px solid;
        border-color: #fff #666 #666 #fff;
        border-radius: 8px;
        padding: 5px 10px;
        cursor: pointer;
        font-family: 'Press Start 2P', cursive;
        font-size: 0.6rem;
        text-shadow: 1px 1px 0px rgba(0,0,0,0.5);
        box-shadow: 2px 2px 4px rgba(0,0,0,0.4);
    }

    .done-button:hover {
        background: linear-gradient(to bottom, #ff5df1, #ff51d9);
        box-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    }
    
    .done-button:active {
        border-color: #666 #fff #fff #666;
        background: linear-gradient(to bottom, #1e90ff, #104e8b);
        transform: translateY(2px);
    }

    .delete-button {
        background: linear-gradient(to bottom, #ff6347, #cd5c5c);
        color: white;
        font-weight: bold;
        border: 3px solid;
        border-color: #fff #666 #666 #fff;
        border-radius: 8px;
        padding: 5px 10px;
        cursor: pointer;
        font-family: 'Press Start 2P', cursive;
        font-size: 0.6rem;
        text-shadow: 1px 1px 0px rgba(0,0,0,0.5);
        box-shadow: 2px 2px 4px rgba(0,0,0,0.4);
    }

    .delete-button:hover {
        background: linear-gradient(to bottom, #ff4500, #b22222);
        box-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    }
    
    .delete-button:active {
        border-color: #666 #fff #fff #666;
        background: linear-gradient(to bottom, #cd5c5c, #8b3a3a);
        transform: translateY(2px);
    }

    .completed {
        text-decoration: line-through;
        opacity: 0.7;
        border-left-color: #9e9e9e;
    }
    
    .achieved-header {
        text-align: center;
        margin-bottom: 15px;
        color: #ffffff;
        background-color: rgba(255, 255, 255, 0.192);
        padding: 5px;
        border-radius: 5px;
    }
    
    /* Style for the heading with tiny GIFs */
    .title-with-gifs {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
    
    .tiny-gif {
        width: 24px;
        height: 24px;
        image-rendering: pixelated; /* Makes pixel art GIFs look sharper */
    }
    
    .achieved-list {
        list-style-type: none;
        padding: 0;
    }
    
    .achieved-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        margin-bottom: 10px;
        background-color: rgba(240, 240, 240, 0.8);
        border-radius: 5px;
        border-left: 4px solid #9e9e9e;
        color: #555;
    }

    .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: center;
        position: fixed; /* Stays at the top when scrolling */
        top: 0;
        left: 0;
        right: 0;
        padding: 10px 20px;
        background-color: rgba(189, 159, 228, 0.8); /* Semi-transparent background */
        box-shadow: 0 2px 3px rgba(0, 0, 0, 0.08); /* Subtle shadow */
        z-index: 100; /* Ensures header stays above other content */
    }

    /* Heading text styling */
    h1 {
        font-family: 'Press Start 2P', cursive;
        font-size: clamp(0.8rem, 3vw, 1.5rem); /* Responsive font size */
        color: black;
        margin: 0;
        max-width: 70%; /* Limit width to prevent overflow */
        word-wrap: break-word;
    }

    h2 {
        font-size: clamp(0.6rem, 2vw, 1rem);
    }

    /* Header button container */
    .header-button-container {
        display: flex;
        align-items: center;
    }

    .header-btn {
        width: auto;
        max-width: 120px;
        height: 40px; /* Fixed height */
        padding: 0 15px; /* Horizontal padding only */
        font-size: clamp(0.4rem, 1.2vw, 0.7rem);
        white-space: nowrap;
        
        /* Center alignment */
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

    .btn {  
        font-family: 'Press Start 2P', cursive;
    }  

    /* Hover effect for specific button types */
    .btn:hover .btn-slide-show-text1 {  
        margin-left: 65px;
    }  

    /* 3D layered button styling for the Y2K era */
    .btn-layered-3d {  
        width: 180px;  
        position: relative;  
        display: inline-block;  
        cursor: pointer;  
        outline: none;
        vertical-align: middle;  
        text-decoration: none;  
        font-size: 0.9rem;  
        font-family: 'Press Start 2P', cursive;  
        font-weight: 600;  
        text-transform: uppercase;  
        padding: 0.8em 1.5em;  
        border-radius: 10px;  
        background: linear-gradient(to bottom, #f0f9ff, #c9e9ff);
        border: 3px solid;
        border-color: #fff #999 #999 #fff;
        color: #003366;
        text-shadow: 1px 1px 0px rgba(255,255,255,0.6);
        box-shadow: 
            0px 0px 0px 1px rgba(0,0,0,0.2),
            3px 3px 5px rgba(0,0,0,0.3),
            inset 0px 1px 1px rgba(255,255,255,0.9);
        transition: all 0.2s ease;
    }

    /* Button hover effects */
    .btn-layered-3d:hover {
        background: linear-gradient(to bottom, #e1f5fe, #81d4fa);
        transform: translateY(-2px);
        box-shadow: 
            0px 0px 0px 1px rgba(0,0,0,0.2),
            4px 4px 8px rgba(0,0,0,0.3),
            inset 0px 1px 1px rgba(255,255,255,0.9);
    } 
    
    .btn-layered-3d:active {
        background: linear-gradient(to bottom, #c9e9ff, #a1c4fd);
        border-color: #999 #fff #fff #999;
        transform: translateY(3px);
        box-shadow: 
            0px 0px 0px 1px rgba(0,0,0,0.2),
            1px 1px 2px rgba(0,0,0,0.3),
            inset 0px 1px 1px rgba(255,255,255,0.9);
    }

    /* Pink theme for the button - more Y2K style */
    .btn-layered-3d--pink {
        background: linear-gradient(to bottom, #ffc0cb, #ff69b4);
        color: #800080;
        border-color: #fff #c71585 #c71585 #fff;
        text-shadow: 1px 1px 0px rgba(255,255,255,0.6);
    }  

    .btn-layered-3d--pink:hover {
        background: linear-gradient(to bottom, #ffb6c1, #ff1493);
    }
    
    .btn-layered-3d--pink:active {
        background: linear-gradient(to bottom, #ff69b4, #c71585);
        border-color: #c71585 #fff #fff #c71585;
    }  

    /* Updated Corner GIF styling with hover effects */
    .corner-gif {
        position: absolute;
        top: -65px;   
        left: -65px;  
        z-index: 10;  
        width: 80px;  
        height: 80px; 
        /* Enable pointer events for hover */
        pointer-events: auto;
        /* Add transition for smooth animation */
        transition: transform 0.3s ease;
    }

    /* Grow and tilt the GIF on hover */
    .corner-gif:hover {
        transform: scale(1.3) rotate(-15deg);
    }

    .corner-gif img {
        width: 200%;
        height: 200%;
        object-fit: contain;
        transition: transform 0.3s ease;
    }

    /* Achievement tooltip styling with two-line format */
    .achievement-tooltip {
        position: absolute;
        top: 20px; /* Adjusted to accommodate two lines */
        left: 100px;
        background: linear-gradient(to bottom, #ff78d9, #ff00aa);
        color: rgb(238, 255, 0);
        padding: 8px 15px;
        border-radius: 5px;
        border: 2px dotted rgb(255, 185, 55);
        box-shadow: 3px 3px 8px rgba(0,0,0,0.5);
        font-size: 0.6rem;
        white-space: normal; /* Allow text to wrap */
        width: 125px; /* Fixed width for the tooltip */
        text-align: center;
        transform: rotate(-5deg);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, transform 0.3s ease;
        z-index: 20;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        line-height: 1.2;
    }

    /* Make the goal count bolder or styled differently */
    #goal-count {
        font-weight: bold;
        font-size: 0.7rem;
        margin-top: 3px;
    }
    
    /* Show tooltip on hover */
    .corner-gif:hover .achievement-tooltip {
        opacity: 1;
        visibility: visible;
        transform: rotate(-5deg) translateY(-5px);
    }

    /* NEW: Date selector styling */
    .date-selector {
        position: fixed;
        top: 60px; /* Below the header */
        left: 0;
        width: 100%;
        background-color: rgba(158, 255, 255, 0.384);
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        z-index: 99;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        border-bottom: 2px dashed #29ff7e;
    }

    .date-selector-inner {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 5px 10px;
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 10px;
        border: 2px solid #6fff5c;
        box-shadow: 0 0 10px rgba(17, 219, 77, 0.3);
    }

    .date-display {
        font-size: 0.8rem;
        color: #800080;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.8);
        padding: 0 15px;
    }

    .date-number {
        font-size: 1rem;
        font-weight: bold;
        color: #ff1493;
    }

    .date-day {
        font-size: 0.7rem;
        color: #9400d3;
        margin-top: 3px;
    }

    .date-nav-button {
        background: linear-gradient(to bottom, #e0f2ff, #87cefa);
        color: #000080;
        border: 2px solid;
        border-color: #fff #999 #999 #fff;
        border-radius: 5px;
        padding: 5px 8px;
        font-size: 0.6rem;
        cursor: pointer;
        box-shadow: 2px 2px 3px rgba(0,0,0,0.3);
        transition: all 0.2s ease;
    }

    .date-nav-button:hover {
        background: linear-gradient(to bottom, #cfe9ff, #1e90ff);
        transform: translateY(-2px);
        box-shadow: 2px 2px 5px rgba(0,0,0,0.4);
    }

    .date-nav-button:active {
        border-color: #999 #fff #fff #999;
        background: linear-gradient(to bottom, #87cefa, #1e90ff);
        transform: translateY(1px);
        box-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    }

    /* Calendar icon */
    .calendar-button {
        background: linear-gradient(to bottom, #ffec64, #ffab23);
        color: #8f5000;
        border: 2px solid;
        border-color: #fff #cc7722 #cc7722 #fff;
        border-radius: 5px;
        padding: 5px 10px;
        font-size: 0.6rem;
        cursor: pointer;
        box-shadow: 2px 2px 3px rgba(0,0,0,0.3);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .calendar-button:hover {
        background: linear-gradient(to bottom, #ffdd7f, #ff9505);
        transform: translateY(-2px);
        box-shadow: 2px 2px 5px rgba(0,0,0,0.4);
    }

    .calendar-button:active {
        border-color: #cc7722 #fff #fff #cc7722;
        background: linear-gradient(to bottom, #ffab23, #ff8c00);
        transform: translateY(1px);
        box-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    }

    .calendar-icon {
        width: 16px;
        height: 16px;
    }

    /* Date picker styling */
    .date-picker-container {
        display: none;
        position: fixed;
        top: 110px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 200;
        background: linear-gradient(to bottom, #ffe0f0, #ffc0cb);
        border: 3px solid #ff69b4;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        padding: 15px;
        width: 300px;
    }

    .date-picker-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .month-selector {
        display: flex;
        gap: 5px;
        align-items: center;
    }

    .month-nav {
        background: linear-gradient(to bottom, #e0f2ff, #87cefa);
        color: #000080;
        border: 2px solid;
        border-color: #fff #999 #999 #fff;
        border-radius: 5px;
        padding: 3px 5px;
        font-size: 0.6rem;
        cursor: pointer;
        box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }

    .month-title {
        font-size: 0.8rem;
        color: #800080;
        text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.8);
    }

    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 2px;
    }

    .day-header {
        text-align: center;
        font-size: 0.6rem;
        color: #8b008b;
        padding: 3px 0;
    }

    .calendar-day {
        text-align: center;
        font-size: 0.7rem;
        padding: 5px;
        cursor: pointer;
        border-radius: 5px;
        transition: all 0.2s ease;
    }

    .calendar-day.other-month {
        color: #999;
        background-color: rgba(255, 255, 255, 0.5);
    }

    .calendar-day.current-month {
        color: #333;
        background-color: rgba(255, 255, 255, 0.8);
        border: 1px solid #ccc;
    }

    .calendar-day.selected {
        background: linear-gradient(to bottom, #ff7eb9, #ff2e9f);
        color: white;
        border: 1px solid #ff1493;
        box-shadow: 0 0 5px rgba(255, 20, 147, 0.5);
    }

    .calendar-day.has-tasks {
        position: relative;
    }

    .calendar-day.has-tasks::after {
        content: '';
        position: absolute;
        
        bottom: 2px;
        left: 20%;
        /*transform: translateX(-50%);*/
        width: 20px;
        height: 20px;
        background-color: rgba(255, 0, 170, 0.3);
        /*border-radius: 50%;*/
    }

    .calendar-day:hover:not(.other-month) {
        background-color: rgba(255, 182, 193, 0.7);
        transform: scale(1.1);
        box-shadow: 0 0 5px rgba(255, 105, 180, 0.5);
    }

    .close-calendar {
        position: absolute;
        top: 5px;
        right: 5px;
        background: none;
        border: none;
        font-size: 1rem;
        /*color: #ff1493;*/
        color: #ff1493;
        cursor: pointer;
    }

    /* Welcome message styling */
    .welcome-message {
        text-align: center;
        margin: 20px 0;
        font-size: 0.8rem;
        color: #000000;
    }
        
        .retro-window-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 300;
        }

        /* Retro window styling */
        .retro-window {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            max-width: 90%;
            background: linear-gradient(to bottom, #e6e6e6, #c1c1c1);
            border: 3px solid;
            border-color: #fff #999 #999 #fff;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5);
            z-index: 301;
            font-family: 'Press Start 2P', cursive;
        }

        .retro-window-titlebar {
            background: linear-gradient(to right, #000080, #0078d7);
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 0.8rem;
            border-bottom: 2px solid #fff;
        }

        .retro-window-title {
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
        }

        .retro-window-close {
            background: #ff5555;
            color: white;
            border: 2px solid;
            border-color: #fff #999 #999 #fff;
            width: 25px;
            height: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            border-radius: 3px;
            font-size: 1rem;
            line-height: 1;
            padding: 0;
        }

        .retro-window-close:hover {
            background: #ff0000;
        }

        .retro-window-close:active {
            border-color: #999 #fff #fff #999;
            background: #cc0000;
        }

        .retro-window-content {
            padding: 15px;
            background-color: #f0f0f0;
            background-image: url('backgrounds/back-765.gif');
            background-size: auto;
            background-repeat: repeat;
        }

        /* Grade display */
        .retro-stats-grade-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.85);
            padding: 10px;
            border: 2px dashed #ff69b4;
            border-radius: 10px;
        }

        .retro-stats-grade-label {
            font-size: 0.8rem;
            color: #800080;
        }

        .retro-stats-grade {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to bottom, #ffcc00, #ff6600);
            /*-webkit-background-clip: text;
            -webkit-text-fill-color: transparent;*/
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            /*filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.199));*/
        }

        /* Graph styles */
        .retro-graph-container {
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.85);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #00bfff;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .retro-graph-title {
            text-align: left;
            font-size: 0.5rem;
            color: #800080;
            margin-bottom: 15px;
            text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.8);
        }

        .retro-graph {
            height: 180px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid #ccc;
            padding: 5px;
            position: relative;
        }

        /* Y-axis grid lines */
        .retro-graph::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                to bottom,
                transparent,
                transparent 29px,
                rgba(0, 0, 0, 0.1) 29px,
                rgba(0, 0, 0, 0.1) 30px
            );
            pointer-events: none;
        }

        .graph-bar {
            width: 30px;
            
            background-image: url(backgrounds/sparklebackground.gif);
            background-repeat: repeat;
            border: 2px solid;
            border-color: #fff #999 #999 #fff;
            border-radius: 3px 3px 0 0;
            position: relative;
            transition: height 0.5s ease;
        }

        .graph-bar-value {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            color: #800080;
            font-size: 0.6rem;
            background: rgba(255, 255, 255, 0.8);
            padding: 2px 4px;
            border-radius: 3px;
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        .days-legend {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .day-label {
            font-size: 0.6rem;
            color: #333;
            text-align: center;
            width: 30px;
        }

        /* Y-axis labels */
        .y-axis-labels {
            position: absolute;
            left: -25px;
            top: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 0.5rem;
            color: #800080;
        }

        .y-label {
            transform: translateY(50%);
        }

        /* Total achievements display */
        .retro-stats-total {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.85);
            padding: 10px;
            border: 2px dashed #00ff00;
            border-radius: 8px;
        }

        .retro-stats-total-label {
            font-size: 0.7rem;
            color: #006400;
        }

        .retro-stats-total-value {
            font-size: 1.5rem;
            color: #ff2424;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
        }

        /* Different grade colors */
        .grade-ap { background: linear-gradient(to bottom, #ffcc0057, #ff660054); }
        .grade-a { background: linear-gradient(to bottom, #ffff0059, #ffa60067); }
        .grade-bp { background: linear-gradient(to bottom, #acff2f5b, #32cd3267); }
        .grade-b { background: linear-gradient(to bottom, #90ee9059, #2e8b565b); }
        .grade-cp { background: linear-gradient(to bottom, #00bfff52, #1e8fff70); }
        .grade-c { background: linear-gradient(to bottom, #87cfeb3a, #4169e167); }
        .grade-dp { background: linear-gradient(to bottom, #da70d62f, #9932cc46); }
        .grade-d { background: linear-gradient(to bottom, #dda0dd3f, #8b008b3f); }
        .grade-fp { background: linear-gradient(to bottom, #ff69b481, #ff149142); }
        .grade-f { background: linear-gradient(to bottom, #ff63476c, #dc143c6b); }


    /* Party celebration styles */
        #party-celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            overflow: hidden;
        }
        
        .party-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1001;
        }
        
        .spotlight-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1002;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .spotlight-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 150px;
            background: radial-gradient(
                ellipse,
                rgba(255, 255, 255, 0.7) 0%,
                rgba(255, 255, 255, 0) 70%
            );
            border-radius: 50%;
            opacity: 0.7;
            animation: pulseGlow 2s infinite alternate;
            z-index: 1001;
        }

        @keyframes pulseGlow {
            from { opacity: 0.5; width: 280px; }
            to { opacity: 0.8; width: 320px; }
        }


        .rainbow-spotlight {
            position: absolute;
            top: -100px; /* Starting above the viewport */
            left: 50%;
            transform: translateX(-50%);
            width: 100px; /* Narrow at the top */
            height: 800px; /* Long enough to reach the bottom */
            background: linear-gradient(to bottom, 
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 0, 0, 0.3) 10%,
                rgba(255, 165, 0, 0.3) 20%,
                rgba(255, 255, 0, 0.3) 30%,
                rgba(0, 128, 0, 0.3) 50%,
                rgba(0, 0, 255, 0.3) 70%,
                rgba(75, 0, 130, 0.3) 85%,
                rgba(238, 130, 238, 0.3) 100%
            );
            clip-path: polygon(0 0, 100% 0, 150% 100%, -50% 100%); /* Creates a cone/trapezoid shape */
            filter: blur(5px);
            opacity: 0.8;
            transform-origin: top center;
            animation: spotlightSway 8s ease-in-out infinite;
            box-shadow: 0 0 50px 20px rgba(255, 255, 255, 0.3);
        }

                /* Add sway animation to make the spotlight move slightly */
        @keyframes spotlightSway {
            0% { transform: translateX(-50%) rotate(-5deg); }
            50% { transform: translateX(-50%) rotate(5deg); }
            100% { transform: translateX(-50%) rotate(-5deg); }
        }

        
        @keyframes pulse {
            from { transform: scale(1); opacity: 0.8; }
            to { transform: scale(1.1); opacity: 1; }
        }
        
        .dancing-man {
            position: absolute;
            bottom: 55%; /* Position from bottom instead of center */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1003;
            height: 500px;
        }
        
        .disco-ball {
            position: absolute;
            z-index: 1002;
            width: 80px;
            height: 80px;
            animation: spin 3s linear infinite;
        }
        
                
        /* Optional: Add some light "dust" particles in the beam */
        .spotlight-dust {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1002;
        }

        .dust-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: floatDust 5s linear infinite;
        }

        @keyframes floatDust {
            0% { opacity: 0; transform: translateY(0) translateX(0); }
            50% { opacity: 0.8; }
            100% { opacity: 0; transform: translateY(300px) translateX(50px); }
        }


        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .close-party {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1004;
            background: linear-gradient(to bottom, #ff0000, #cc0000);
            color: white;
            border: 3px solid white;
            border-radius: 10px;
            padding: 10px 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            cursor: pointer;
            animation: blink 0.5s infinite alternate;
            box-shadow: 0 0 10px 2px rgba(255,255,255,0.5);
        }
        
        @keyframes blink {
            from { opacity: 0.7; }
            to { opacity: 1; }
        }
        
        /* A+ grade animation */
        .grade-ap.party-mode {
            animation: rainbow-text 2s infinite;
            font-size: 4rem !important;
            transition: font-size 0.5s ease;
        }
        
        @keyframes rainbow-text {
            0% { color: red; text-shadow: 0 0 10px red; }
            14% { color: orange; text-shadow: 0 0 10px orange; }
            28% { color: yellow; text-shadow: 0 0 10px yellow; }
            42% { color: green; text-shadow: 0 0 10px green; }
            57% { color: blue; text-shadow: 0 0 10px blue; }
            71% { color: indigo; text-shadow: 0 0 10px indigo; }
            85% { color: violet; text-shadow: 0 0 10px violet; }
            100% { color: red; text-shadow: 0 0 10px red; }
        }
            @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
        }
    
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes wobble {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-15px) rotate(-5deg); }
            75% { transform: translateX(15px) rotate(5deg); }
        }
        
        .celebration-gif {
            position: absolute;
            z-index: 1005;
            pointer-events: none;
        }
        
        .celebration-gif img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

    /* Responsive design for smaller screens */
    @media (max-width: 768px) {
        .tasks-container {
            flex-direction: column;
            align-items: center;
        }
        
        .notebook-container {
            width: 90%;
            max-width: none;
            margin-right: 0;
            margin-bottom: 20px;
        }
        
        .achieved-container {
            width: 90%;
            max-width: none;
            top: 0;
        }

        .date-selector-inner {
            flex-wrap: wrap;
            justify-content: center;
        }

        .date-display {
            padding: 5px 0;
        }

        .date-picker-container {
            width: 90%;
            max-width: 300px;
        }}


    </style>
</head>

<body>
    <!-- Fixed header with button -->
    <div class="header-container">
        <h1>my own to-do list</h1>
        <div class="header-button-container">
            <button class="btn btn-layered-3d btn-layered-3d--pink header-btn" onclick="window.location.href='index.html'">
                Home
            </button>
        </div>
        <div class="date-selector">
        <div class="date-selector-inner">
            <button class="date-nav-button" id="prev-date">◀ Prev</button>
            <div class="date-display">
                <div class="date-number" id="date-display">05/17/25</div>
                <div class="date-day" id="day-display">Saturday</div>
            </div>
            <button class="date-nav-button" id="next-date">Next ▶</button>
            <button class="calendar-button" id="open-calendar">
                <img src="gifs/calendar-icon.gif" alt="Calendar" class="calendar-icon"> Calendar
            </button>
        </div>
        </div>
    </div>
    <audio id="celebration-music" src="music/clapping.wav" preload="auto"></audio>
    <!-- NEW: Date selector -->
    

    <!-- Date picker container (hidden by default) -->
    <div class="date-picker-container" id="date-picker">
        <button class="close-calendar" id="close-calendar">×</button>
        <div class="date-picker-header">
            <div class="month-selector">
                <button class="month-nav" id="prev-month">◀</button>
                <div class="month-title" id="month-year-display">May 2025</div>
                <button class="month-nav" id="next-month">▶</button>
            </div>
        </div>
        <div class="calendar-grid">
            <div class="day-header">Su</div>
            <div class="day-header">Mo</div>
            <div class="day-header">Tu</div>
            <div class="day-header">We</div>
            <div class="day-header">Th</div>
            <div class="day-header">Fr</div>
            <div class="day-header">Sa</div>
            <!-- Calendar days will be added here via JavaScript -->
        </div>
    </div>

    <!-- New container for the side-by-side layout -->
    <div class="tasks-container">
        <!-- Update your corner-gif div to include the tooltip -->
        <div class="corner-gif" id="corner-gif-container">
            <img src="gifs/britney-sits.gif" alt="Corner decoration">
            <div class="achievement-tooltip" id="achievement-counter">
                <div>You have achieved</div>
                <div id="goal-count">0 goals</div>
                <div>today!</div>
            </div>
        </div>
        <div id="retro-stats-window" class="retro-window" style="display: none;">
                <div class="retro-window-titlebar">
                    <div class="retro-window-title">✨ Achievement Stats ✨</div>
                    <button class="retro-window-close" id="close-stats-window">×</button>
                </div>
                <div class="retro-window-content">
                    <div class="retro-stats-grade-container">
                        <div class="retro-stats-grade-label">Weekly Grade:</div>
                        <div class="retro-stats-grade" id="weekly-grade">A+</div>
                    </div>
                    <div class="retro-graph-container">
                        <div class="retro-graph-title">Last 7 Days Achievements</div>
                        <div class="retro-graph" id="achievements-graph">
                            <!-- Graph bars will be generated here -->
                        </div>
                        <div class="retro-graph-legend">
                            <div class="days-legend" id="days-legend">
                                <!-- Day labels will be generated here -->
                            </div>
                        </div>
                    </div>
                    <div class="retro-stats-total">
                        <div class="retro-stats-total-label">Total achievements this week:</div>
                        <div class="retro-stats-total-value" id="total-achievements">21</div>
                    </div>
                </div>
        </div>
            
        <!-- Overlay for the retro window -->
        <div id="retro-window-overlay" class="retro-window-overlay" style="display: none;"></div>
        <!-- To-do list container -->
        <div class="notebook-container">
            <div class="todo-header">
                <div class="title-with-gifs">
                    <img src="gifs/colorful-stars.gif" alt="✨" class="tiny-gif">
                    <h1>My To-Do List</h1>
                    <img src="gifs/colorful-stars.gif" alt="✨" class="tiny-gif">
                </div>
            </div>
            <!-- Welcome message for empty days -->
            <div class="welcome-message" id="empty-day-message" style="display: none;">
                No tasks yet.. How could that be?!
            </div>
            
            <div class="todo-input-container">
                <input type="text" id="todo-input" placeholder="Add a new task...">
                <button id="add-button">Add</button>
            </div>
            <ul class="todo-list" id="todo-list">
                <!-- To-do items will be added here -->
            </ul>
        </div>
        
        <!-- Achieved tasks container, now positioned to the right -->
        <div class="achieved-container">
            <div class="achieved-header">
                <div class="title-with-gifs">
                    <img src="gifs/cute-bubble-star.gif" alt="✨" class="tiny-gif">
                    <h2>Achieved Tasks</h2>
                    <img src="gifs/cute-bubble-star.gif" alt="✨" class="tiny-gif">
                </div>
            </div>
            <ul class="achieved-list" id="achieved-list">
                <!-- Achieved items will be added here -->
            </ul>
        </div>
        <div id="party-celebration" style="display: none;">
            <!-- Darkened overlay -->
            <div class="party-overlay"></div>
            
            <!-- Rainbow spotlight container -->
            <div class="spotlight-container">
                <div class="rainbow-spotlight"></div>
                <div class="spotlight-dust"></div>
                <!-- Dancing man in spotlight -->
                <img src="gifs/dancing-man.gif" alt="Party time!" class="dancing-man">
            </div>
            
            <!-- Disco balls container -->
            <div class="disco-container">
                <!-- Disco balls will be added dynamically -->
            </div>
            
            <!-- Close button -->
            <button id="close-party" class="close-party">× STOP PARTY</button>
        </div>

        <!-- Add the audio element for the celebration song -->
        <audio id="celebration-song" src="music/sean-temperature.mp3" preload="auto"></audio>

    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        // Set the background image for the body
        const setBackgroundImage = () => {
            document.body.style.backgroundImage = 'url("backgrounds/back-290.gif")';
            document.body.style.backgroundRepeat = 'repeat';
            document.body.style.backgroundSize = 'auto';
        };
        
        setBackgroundImage();
        
        // DOM elements
        const todoInput = document.getElementById('todo-input');
        const addButton = document.getElementById('add-button');
        const todoList = document.getElementById('todo-list');
        const achievedList = document.getElementById('achieved-list');
        const dateDisplayEl = document.getElementById('date-display');
        const dayDisplayEl = document.getElementById('day-display');
        const prevDateBtn = document.getElementById('prev-date');
        const nextDateBtn = document.getElementById('next-date');
        const openCalendarBtn = document.getElementById('open-calendar');
        const datePickerEl = document.getElementById('date-picker');
        const closeCalendarBtn = document.getElementById('close-calendar');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const monthYearDisplayEl = document.getElementById('month-year-display');
        const calendarGridEl = document.querySelector('.calendar-grid');
        const emptyDayMessageEl = document.getElementById('empty-day-message');
        const cornerGif = document.querySelector('.corner-gif');
        const closeStatsBtn = document.getElementById('close-stats-window');
        const overlay = document.getElementById('retro-window-overlay');
        
        // Date management
        let currentDate = new Date(); // Default to today
        let currentCalendarMonth = new Date(); // For the calendar view
        
        // Format date as MM/DD/YY string
        const formatDateDisplay = (date) => {
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const year = String(date.getFullYear()).slice(-2);
            return `${month}/${day}/${year}`;
        };
        
        // Get day name
        const getDayName = (date) => {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            return days[date.getDay()];
        };
        
        // Format date as YYYY-MM-DD for storage key
        const formatDateForStorage = (date) => {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        };
        
        // Function to get achievement data for the last 7 days
        function getLast7DaysData() {
            const data = [];
            const today = new Date();
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                
                const dateKey = formatDateForStorage(date);
                const dateData = JSON.parse(localStorage.getItem(`todoData_${dateKey}`) || 'null');
                
                const achievementCount = dateData && dateData.achieved ? dateData.achieved.length : 0;
                
                data.push({
                    date: date,
                    count: achievementCount
                });
            }
            
            return data;
        }

        // Calculate total achievements across all days
        function calculateTotalAchievements(daysData) {
            return daysData.reduce((total, day) => total + day.count, 0);
        }

        // Determine grade based on total achievements
        function determineGrade(total) {
            if (total >= 21) return { letter: 'A+', class: 'grade-ap' };
            if (total >= 17) return { letter: 'A', class: 'grade-a' };
            if (total >= 14) return { letter: 'B+', class: 'grade-bp' };
            if (total >= 8) return { letter: 'B', class: 'grade-b' };
            if (total >= 7) return { letter: 'C+', class: 'grade-cp' };
            if (total >= 4) return { letter: 'C-', class: 'grade-c' };
            if (total >= 3) return { letter: 'D+', class: 'grade-dp' };
            if (total >= 2) return { letter: 'D-', class: 'grade-d' };
            if (total >= 1) return { letter: 'F+', class: 'grade-fp' };
            return { letter: 'F-', class: 'grade-f' };
        }

        // Update the grade display
        function updateGradeDisplay(grade, totalAchievements) {
            const gradeElement = document.getElementById('weekly-grade');
            gradeElement.textContent = grade.letter;
            
            // Remove any existing grade classes
            gradeElement.className = 'retro-stats-grade';
            
            // Add the appropriate grade class
            gradeElement.classList.add(grade.class);
            
            // Update total achievements
            document.getElementById('total-achievements').textContent = totalAchievements;
        }

        // Generate the graph for the last 7 days
        function generateGraph(daysData) {
            const graphContainer = document.getElementById('achievements-graph');
            const daysLegend = document.getElementById('days-legend');
            
            // Clear existing content
            graphContainer.innerHTML = '';
            daysLegend.innerHTML = '';
            
            // Find the maximum achievement count to scale the graph
            const maxCount = Math.max(...daysData.map(day => day.count));
            const graphHeight = 180; // Same as the CSS height
            const scale = maxCount > 0 ? graphHeight / maxCount : 0;
            
            // Add Y-axis labels
            const yAxisLabels = document.createElement('div');
            yAxisLabels.className = 'y-axis-labels';
            
            // If we have data, create labels
            if (maxCount > 0) {
                // Create 6 evenly spaced labels
                const labelCount = 6;
                for (let i = 0; i < labelCount; i++) {
                    const value = Math.round((maxCount / (labelCount - 1)) * (labelCount - 1 - i));
                    const label = document.createElement('div');
                    label.className = 'y-label';
                    label.textContent = value;
                    yAxisLabels.appendChild(label);
                }
            } else {
                // If no data, just show one label
                const label = document.createElement('div');
                label.className = 'y-label';
                label.textContent = '0';
                yAxisLabels.appendChild(label);
            }
            
            graphContainer.appendChild(yAxisLabels);
            
            // Add bars for each day
            daysData.forEach((day, index) => {
                // Create bar
                const bar = document.createElement('div');
                bar.className = 'graph-bar';
                
                // Calculate bar height based on count
                const height = day.count * scale;
                bar.style.height = `${height}px`;
                
                // Add value label
                const valueLabel = document.createElement('div');
                valueLabel.className = 'graph-bar-value';
                valueLabel.textContent = day.count;
                bar.appendChild(valueLabel);
                
                // Add bar to container
                graphContainer.appendChild(bar);
                
                // Add day label
                const dayLabel = document.createElement('div');
                dayLabel.className = 'day-label';
                
                // Get short day name (Sun, Mon, etc.)
                const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayLabel.textContent = dayNames[day.date.getDay()];
                
                daysLegend.appendChild(dayLabel);
            });
        }

        // Update date display
        const updateDateDisplay = () => {
            dateDisplayEl.textContent = formatDateDisplay(currentDate);
            dayDisplayEl.textContent = getDayName(currentDate);
            
            // Also update the calendar if it's open
            if (datePickerEl.style.display === 'block') {
                updateCalendarView();
            }
        };
        
        // Navigate to the previous day
        const goToPrevDay = () => {
            const newDate = new Date(currentDate);
            newDate.setDate(newDate.getDate() - 1);
            currentDate = newDate;
            updateDateDisplay();
            loadDataForCurrentDate();
        };
        
        // Navigate to the next day
        const goToNextDay = () => {
            const newDate = new Date(currentDate);
            newDate.setDate(newDate.getDate() + 1);
            currentDate = newDate;
            updateDateDisplay();
            loadDataForCurrentDate();
        };
        
        // Navigate to specific date
        const goToDate = (date) => {
            currentDate = new Date(date);
            updateDateDisplay();
            loadDataForCurrentDate();
        };
        
        // Function to update achievement count for the current date
        const updateAchievementCount = () => {
            const goalCount = document.getElementById('goal-count');
            if (goalCount) {
                const count = document.getElementById('achieved-list').children.length;
                goalCount.textContent = `${count} goal${count !== 1 ? 's' : ''}`;
            }
        };
        
        // Check if a date has any tasks
        const dateHasTasks = (date) => {
            const dateKey = formatDateForStorage(date);
            const dateData = JSON.parse(localStorage.getItem(`todoData_${dateKey}`) || 'null');
            if (!dateData) return false;
            
            return (dateData.todos && dateData.todos.length > 0) || 
                (dateData.achieved && dateData.achieved.length > 0);
        };
        
        // Load data for the current date
        const loadDataForCurrentDate = () => {
            // Clear existing lists
            todoList.innerHTML = '';
            achievedList.innerHTML = '';
            
            const dateKey = formatDateForStorage(currentDate);
            const dateData = JSON.parse(localStorage.getItem(`todoData_${dateKey}`) || 'null');
            
            if (dateData) {
                // Load todos
                if (dateData.todos && dateData.todos.length > 0) {
                    dateData.todos.forEach(todo => {
                        addTodoToDOM(todo.text);
                    });
                    emptyDayMessageEl.style.display = 'none';
                }
                
                // Load achieved
                if (dateData.achieved && dateData.achieved.length > 0) {
                    dateData.achieved.forEach(item => {
                        addToAchievedList(item.text);
                    });
                    emptyDayMessageEl.style.display = 'none';
                }
                
                // Show empty message if no tasks
                if ((!dateData.todos || dateData.todos.length === 0) && 
                    (!dateData.achieved || dateData.achieved.length === 0)) {
                    emptyDayMessageEl.style.display = 'block';
                }
            } else {
                // No data for this date
                emptyDayMessageEl.style.display = 'block';
            }
            
            // Update achievement count
            updateAchievementCount();
        };
        
        // Save data for the current date
        const saveDataForCurrentDate = () => {
            const dateKey = formatDateForStorage(currentDate);
            
            const todos = Array.from(todoList.children).map(item => {
                return {
                    text: item.querySelector('.todo-text').textContent
                };
            });
            
            const achieved = Array.from(achievedList.children).map(item => {
                return {
                    text: item.querySelector('.todo-text').textContent
                };
            });
            
            const dateData = { todos, achieved };
            localStorage.setItem(`todoData_${dateKey}`, JSON.stringify(dateData));
            
            // Handle empty day message visibility
            if (todos.length === 0 && achieved.length === 0) {
                emptyDayMessageEl.style.display = 'block';
            } else {
                emptyDayMessageEl.style.display = 'none';
            }
            
            // Update the calendar if it's open
            if (datePickerEl.style.display === 'block') {
                updateCalendarView();
            }
        };
        
        // Generate and update the calendar view
        const updateCalendarView = () => {
            // Clear out days from the previous render, but keep the header row
            const dayElements = calendarGridEl.querySelectorAll('.calendar-day');
            dayElements.forEach(el => el.remove());
            
            // Get first day of the month and last day of the month
            const firstDay = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth(), 1);
            const lastDay = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth() + 1, 0);
            
            // Update month/year display
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                                'July', 'August', 'September', 'October', 'November', 'December'];
            monthYearDisplayEl.textContent = `${monthNames[currentCalendarMonth.getMonth()]} ${currentCalendarMonth.getFullYear()}`;
            
            // Get the day of week the first day falls on (0 = Sunday, 6 = Saturday)
            const firstDayOfWeek = firstDay.getDay();
            
            // Get some days from the previous month to fill the calendar grid
            const daysFromPrevMonth = firstDayOfWeek;
            const prevMonthLastDay = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth(), 0).getDate();
            
            // Generate previous month days
            for (let i = daysFromPrevMonth - 1; i >= 0; i--) {
                const dayNum = prevMonthLastDay - i;
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.textContent = dayNum;
                
                // Create date object for this day
                const dayDate = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth() - 1, dayNum);
                
                // Check if this date has tasks
                if (dateHasTasks(dayDate)) {
                    dayElement.classList.add('has-tasks');
                }
                
                dayElement.addEventListener('click', () => {
                    goToDate(dayDate);
                    datePickerEl.style.display = 'none';
                });
                
                calendarGridEl.appendChild(dayElement);
            }
            
            // Generate current month days
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day current-month';
                dayElement.textContent = i;
                
                // Create date object for this day
                const dayDate = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth(), i);
                
                // Check if this is the selected date
                if (dayDate.getDate() === currentDate.getDate() && 
                    dayDate.getMonth() === currentDate.getMonth() && 
                    dayDate.getFullYear() === currentDate.getFullYear()) {
                    dayElement.classList.add('selected');
                }
                
                // Check if this date has tasks
                if (dateHasTasks(dayDate)) {
                    dayElement.classList.add('has-tasks');
                }
                
                dayElement.addEventListener('click', () => {
                    goToDate(dayDate);
                    datePickerEl.style.display = 'none';
                });
                
                calendarGridEl.appendChild(dayElement);
            }
            
            // Calculate how many days we need from the next month to complete the grid
            const totalDaysDisplayed = daysFromPrevMonth + lastDay.getDate();
            const daysFromNextMonth = Math.ceil(totalDaysDisplayed / 7) * 7 - totalDaysDisplayed;
            
            // Generate next month days
            for (let i = 1; i <= daysFromNextMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.textContent = i;
                
                // Create date object for this day
                const dayDate = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth() + 1, i);
                
                // Check if this date has tasks
                if (dateHasTasks(dayDate)) {
                    dayElement.classList.add('has-tasks');
                }
                
                dayElement.addEventListener('click', () => {
                    goToDate(dayDate);
                    datePickerEl.style.display = 'none';
                });
                
                calendarGridEl.appendChild(dayElement);
            }
        };
        
        // Add a new to-do item to the DOM
        const addTodoToDOM = (text) => {
            const todoItem = document.createElement('li');
            todoItem.className = 'todo-item';
            
            const todoText = document.createElement('span');
            todoText.className = 'todo-text';
            todoText.textContent = text;
            
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'button-container';
            
            const doneButton = document.createElement('button');
            doneButton.className = 'done-button';
            doneButton.textContent = 'Done';
            
            const deleteButton = document.createElement('button');
            deleteButton.className = 'delete-button';
            deleteButton.textContent = 'Delete';
            
            buttonContainer.appendChild(doneButton);
            buttonContainer.appendChild(deleteButton);
            
            todoItem.appendChild(todoText);
            todoItem.appendChild(buttonContainer);
            todoList.appendChild(todoItem);
            
            // Hide empty message
            emptyDayMessageEl.style.display = 'none';
            const music = document.getElementById('celebration-music');
            if (music) {
                music.currentTime = 0; // Reset to beginning
                music.volume = 0.6; // Set volume to 60%
            }
            
            // Add event listeners
            doneButton.addEventListener('click', () => {
                if (music) {
                    const playPromise = music.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(error => {
                            console.log("Audio playback failed:", error);
                        });
                    }
                }
                
                // Move to achieved list
                todoList.removeChild(todoItem);
                addToAchievedList(text);
                saveDataForCurrentDate();
            });
            
            deleteButton.addEventListener('click', () => {
                todoList.removeChild(todoItem);
                saveDataForCurrentDate();
            });
        };
        
        // Add an item to the achieved list
        const addToAchievedList = (text) => {
            const achievedItem = document.createElement('li');
            achievedItem.className = 'achieved-item';
            
            const achievedText = document.createElement('span');
            achievedText.className = 'todo-text';
            achievedText.textContent = text;
            
            const deleteButton = document.createElement('button');
            deleteButton.className = 'delete-button';
            deleteButton.textContent = 'Remove';
            
            achievedItem.appendChild(achievedText);
            achievedItem.appendChild(deleteButton);
            achievedList.appendChild(achievedItem);
            
            // Hide empty message
            emptyDayMessageEl.style.display = 'none';
            
            // Add event listener for delete
            deleteButton.addEventListener('click', () => {
                achievedList.removeChild(achievedItem);
                saveDataForCurrentDate();
                updateAchievementCount(); // Update count when removing an item
            });
            
            // Update achievement count when adding a new item
            updateAchievementCount();
        };

        
        // Function to add random celebration GIFs to the party
        function addRandomCelebrationGifs() {
            // Array of celebration GIFs - add your file paths here
            const celebrationGifs = [
                'gifs/party-gif1.gif',  // Replace with your actual GIF paths
                'gifs/party-gif2.gif',
                'gifs/party-gif3.gif',
                'gifs/party-gif4.gif',
                'gifs/party-gif5.gif'
                // Add more GIFs as needed
            ];
            
            // Get the party container
            const partyContainer = document.getElementById('party-celebration');
            if (!partyContainer) return;
            
            // Create a container for the celebration GIFs if it doesn't exist
            let gifContainer = document.querySelector('.celebration-gifs-container');
            if (!gifContainer) {
                gifContainer = document.createElement('div');
                gifContainer.className = 'celebration-gifs-container';
                partyContainer.appendChild(gifContainer);
            }
            
            // Clear any existing GIFs
            gifContainer.innerHTML = '';
            
            // Number of GIFs to add
            const numGifsToAdd = 25; // You can change this number
            
            // Add random GIFs
            for (let i = 0; i < numGifsToAdd; i++) {
                // Select a random GIF from the array
                const randomIndex = Math.floor(Math.random() * celebrationGifs.length);
                const gifSrc = celebrationGifs[randomIndex];
                
                // Create a container for this specific GIF with animation
                const gifElement = document.createElement('div');
                gifElement.className = 'celebration-gif';
                
                // Create the image element
                const img = document.createElement('img');
                img.src = gifSrc;
                img.alt = 'Celebration';
                
                // Add image to container
                gifElement.appendChild(img);
                
                // Random position on screen
                const topPosition = Math.floor(Math.random() * 70) + 10; // 10-80% from top
                const leftPosition = Math.floor(Math.random() * 70) + 10; // 10-80% from left
                
                // Random size (50-150px)
                const size = Math.floor(Math.random() * 100) + 50;
                
                // Apply styles
                gifElement.style.position = 'absolute';
                gifElement.style.top = `${topPosition}%`;
                gifElement.style.left = `${leftPosition}%`;
                gifElement.style.width = `${size}px`;
                gifElement.style.height = `${size}px`;
                gifElement.style.zIndex = '1005'; // Above other elements
                
                // Add random animation
                const animations = [
                    'bounce 2s infinite',
                    'spin 3s infinite linear',
                    'pulse 2s infinite',
                    'wobble 3s infinite'
                ];
                const randomAnimation = animations[Math.floor(Math.random() * animations.length)];
                gifElement.style.animation = randomAnimation;
                
                // Add to container
                gifContainer.appendChild(gifElement);
            }
        }
        // Function to add dust particles to the spotlight beam
        function addSpotlightDustEffect() {
            // Create dust container if it doesn't exist
            let dustContainer = document.querySelector('.spotlight-dust');
            if (!dustContainer) {
                dustContainer = document.createElement('div');
                dustContainer.className = 'spotlight-dust';
                document.querySelector('.spotlight-container').appendChild(dustContainer);
            }
            
            // Clear existing particles
            dustContainer.innerHTML = '';
            
            // Add new dust particles
            const numParticles = 30;
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'dust-particle';
                
                // Random position within the spotlight beam
                const leftPos = 40 + Math.random() * 20; // 40-60% from left
                const topPos = Math.random() * 60; // 0-60% from top
                
                // Random size
                const size = 1 + Math.random() * 3;
                
                // Random animation duration and delay
                const duration = 3 + Math.random() * 6;
                const delay = Math.random() * 5;
                
                // Apply styles
                particle.style.left = `${leftPos}%`;
                particle.style.top = `${topPos}%`;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.opacity = Math.random() * 0.5 + 0.3;
                particle.style.animation = `floatDust ${duration}s linear ${delay}s infinite`;
                
                // Add to container
                dustContainer.appendChild(particle);
            }

        }
        // Function to start the party celebration
        function startPartyCelebration() {
            console.log("Starting party celebration!"); // Debug log
            
            // Get the audio element
            const celebrationSong = document.getElementById('celebration-song');
            if (!celebrationSong) {
                console.error("Could not find celebration-song element!");
                return;
            }
            
            // Show the celebration container
            const partyCelebration = document.getElementById('party-celebration');
            if (!partyCelebration) {
                console.error("Could not find party-celebration element!");
                return;
            }
            
            partyCelebration.style.display = 'block';
            // Inside your startPartyCelebration function
            // After the line: partyCelebration.style.display = 'block';
            addSpotlightDustEffect();
            addRandomCelebrationGifs();
            // Add the party mode class to the grade
            const gradeElement = document.getElementById('weekly-grade');
            if (gradeElement) {
                gradeElement.classList.add('party-mode');
            } else {
                console.error("Could not find weekly-grade element!");
            }
            
            // Add disco balls randomly around the page
            const discoContainer = document.querySelector('.disco-container');
            if (!discoContainer) {
                console.error("Could not find disco-container element!");
                return;
            }
            
            discoContainer.innerHTML = ''; // Clear any existing disco balls
            
            // Create 15 disco balls
            for (let i = 0; i < 15; i++) {
                const discoBall = document.createElement('img');
                discoBall.src = 'gifs/disco-ball.gif'; // Make sure you have this GIF
                discoBall.className = 'disco-ball';
                
                // Random position
                const randomTop = Math.floor(Math.random() * 80) + 10; // 10-90%
                const randomLeft = Math.floor(Math.random() * 80) + 10; // 10-90%
                
                discoBall.style.top = `${randomTop}%`;
                discoBall.style.left = `${randomLeft}%`;
                
                // Random size
                const randomSize = Math.floor(Math.random() * 50) + 50; // 50-100px
                discoBall.style.width = `${randomSize}px`;
                discoBall.style.height = `${randomSize}px`;
                
                // Add to container
                discoContainer.appendChild(discoBall);
            }
            
            // Play the celebration song with error handling
            celebrationSong.volume = 0.7; // 70% volume
            celebrationSong.currentTime = 0; // Start from beginning
            
            try {
                const playPromise = celebrationSong.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.error("Audio playback failed:", error);
                    });
                }
            } catch (e) {
                console.error("Error playing audio:", e);
            }
            
            // Set up event listener for close button
            const closePartyButton = document.getElementById('close-party');
            if (closePartyButton) {
                // Remove existing listeners to prevent duplicates
                const newCloseButton = closePartyButton.cloneNode(true);
                closePartyButton.parentNode.replaceChild(newCloseButton, closePartyButton);
                newCloseButton.addEventListener('click', stopPartyCelebration);
            } else {
                console.error("Could not find close-party button!");
            }
        }
        
        // Function to stop the party
        function stopPartyCelebration() {
            console.log("Stopping party celebration!"); // Debug log
            
            // Get elements
            const partyCelebration = document.getElementById('party-celebration');
            const celebrationSong = document.getElementById('celebration-song');
            const gradeElement = document.getElementById('weekly-grade');
            
            // Hide the celebration container
            if (partyCelebration) {
                partyCelebration.style.display = 'none';
            }
            
            // Stop the music
            if (celebrationSong) {
                celebrationSong.pause();
            }
            
            // Remove party mode class
            if (gradeElement) {
                gradeElement.classList.remove('party-mode');
            }
        }
        
        // Function to show retro stats window with added party celebration check
        function showRetroStatsWindow() {
            console.log("Showing stats window"); // Debug log
            
            // Get the last 7 days of data
            const last7DaysData = getLast7DaysData();
            
            // Calculate total and determine grade
            const totalAchievements = calculateTotalAchievements(last7DaysData);
            const grade = determineGrade(totalAchievements);
            
            // Update the grade display
            updateGradeDisplay(grade, totalAchievements);
            
            // Generate the graph
            generateGraph(last7DaysData);
            
            // Show the window and overlay
            document.getElementById('retro-stats-window').style.display = 'block';
            document.getElementById('retro-window-overlay').style.display = 'block';
            
            // Check if grade is A+ after a short delay to ensure the DOM is updated
            setTimeout(() => {
                const gradeElement = document.getElementById('weekly-grade');
                console.log("Grade element text:", gradeElement ? gradeElement.textContent : 'not found');
                
                if (gradeElement && gradeElement.textContent === 'A+') {
                    console.log("A+ grade detected! Starting party...");
                    startPartyCelebration();
                }
            }, 500);
        }
        
        // Function to close retro stats window with added party cleanup
        function closeRetroStatsWindow() {
            console.log("Closing stats window"); // Debug log
            
            // Stop the party if it's active
            stopPartyCelebration();
            
            // Hide the window and overlay
            document.getElementById('retro-stats-window').style.display = 'none';
            document.getElementById('retro-window-overlay').style.display = 'none';
        }
        
        // ===== Event Listeners =====
        
        // Add new to-do when Add button is clicked
        addButton.addEventListener('click', () => {
            const text = todoInput.value.trim();
            if (text) {
                addTodoToDOM(text);
                todoInput.value = '';
                saveDataForCurrentDate();
            }
        });
        
        // Add new to-do when Enter key is pressed
        todoInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const text = todoInput.value.trim();
                if (text) {
                    addTodoToDOM(text);
                    todoInput.value = '';
                    saveDataForCurrentDate();
                }
            }
        });
        
        // Previous day navigation
        prevDateBtn.addEventListener('click', goToPrevDay);
        
        // Next day navigation
        nextDateBtn.addEventListener('click', goToNextDay);
        
        // Open calendar
        openCalendarBtn.addEventListener('click', () => {
            // Set calendar to current view month/year
            currentCalendarMonth = new Date(currentDate);
            updateCalendarView();
            datePickerEl.style.display = 'block';
        });
        
        // Close calendar
        closeCalendarBtn.addEventListener('click', () => {
            datePickerEl.style.display = 'none';
        });
        
        // Previous month in calendar
        prevMonthBtn.addEventListener('click', () => {
            currentCalendarMonth.setMonth(currentCalendarMonth.getMonth() - 1);
            updateCalendarView();
        });
        
        // Next month in calendar
        nextMonthBtn.addEventListener('click', () => {
            currentCalendarMonth.setMonth(currentCalendarMonth.getMonth() + 1);
            updateCalendarView();
        });
        
        // Stats window events
        cornerGif.addEventListener('click', showRetroStatsWindow);
        closeStatsBtn.addEventListener('click', closeRetroStatsWindow);
        overlay.addEventListener('click', closeRetroStatsWindow);
        
        // Initialize the app
        updateDateDisplay();
        loadDataForCurrentDate();
        
        // Hide date picker initially
        datePickerEl.style.display = 'none';
        
        // FOR TESTING ONLY - Uncomment to test the party celebration
        // setTimeout(() => { startPartyCelebration(); }, 3000);
        
        // Check for required elements and log to console
        console.log("Checking for required elements...");
        ["celebration-song", "party-celebration", "weekly-grade", "close-party", "disco-container"].forEach(id => {
            console.log(`Element '${id}': ${document.getElementById(id) ? 'Found ✓' : 'MISSING ❌'}`);
        });
    });
    </script>
    
    
</body>
</html>